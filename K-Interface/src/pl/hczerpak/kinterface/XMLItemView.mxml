<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
    backgroundAlpha="{(app().roamer.dataProvider as Graph).numLinks(data as Item) > 1 ? 1.0 : 0.3}"
    filters="{calcFilters(app().roamer.currentItem, data as Item)}" xmlns:ns1="pl.hczerpak.kinterface.components.*">    
    
    <ns1:Circle x="0" y="0" width="100%" height="100%"/>            
    <mx:Text fontSize="10" text="{data.data.@prop}" width="65" selectable="false" y="0" x="0"/>    
    
    <mx:Script>
        <![CDATA[
            import mx.effects.Glow;
            import com.adobe.flex.extras.controls.springgraph.Graph;
            import com.adobe.flex.extras.controls.springgraph.Item;
            import mx.core.Application;
            
            public function doubleClick(event: Event): void {
                app().itemDoubleClick(event);
            }
            
            private function app(): main {
                return Application.application as main;
            }
            
            /* This function gets called whenever the graph's current item changes,
             * or when our data changes, to calculate the borderthickness.*/
            private function calcFilters(currentItem: Item, item: Item): Array {
                if(app().roamer.currentItem == item) {
                    return [new GlowFilter(0xFF0000, 0.5, 8, 8, 2, 1)];
                } else if(app().roamer.hasBeenCurrentItem(item)) {
                    return [new GlowFilter(0x0000FF, 0.3, 6, 6, 2, 1)];
                } else {
                    return null;
                }
            }
        ]]>
    </mx:Script>                
</mx:Canvas>